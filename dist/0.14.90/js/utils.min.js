import{g as e}from"./config.min.js";import{g as t,p as n,t as r,a as o}from"./services.min.js";const a="gw2.precomputed.bucket",i="gw2.canary.assignments",s=100,l="default";function c(e,t=a){if(!e)return null;try{return e.getItem(t)}catch{return null}}function u(e,t,n){if(e)try{null===n?e.removeItem(t):e.setItem(t,String(n))}catch{}}function f(e){if(null==e)return null;const t=Number.isFinite(e)?Number(e):Number.parseInt(e,10);if(!Number.isFinite(t))return null;const n=Math.floor(t);return n<0||n>=100?null:n}function d(e){if(!e)return null;if(e instanceof Date){const t=e.getTime();return Number.isFinite(t)?e.toISOString():null}const t=new Date(e),n=t.getTime();return Number.isFinite(n)?t.toISOString():null}function p(e){if(null==e)return null;const t=String(e).trim();if(!t)return null;return t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/[_\s]+/g,"-").toLowerCase().replace(/[^a-z0-9-]+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")||null}function g(e={}){if("string"==typeof e)return g({scope:e});if(!e||"object"!=typeof e)return l;const t=e=>"string"==typeof e&&e?e:null,n=t(e.feature??e.flag??e.name??null);if(n){const e=p(n);if(e)return`feature:${e}`}const r=t(e.screen??e.page??null);if(r){const e=p(r);if(e)return`screen:${e}`}const o=t(e.scope);if(o){if(/^(feature|screen):/i.test(o)){const[e,t]=o.split(":",2),n=p(t);return n?`${e.toLowerCase()}:${n}`:null}return p(o)||null}return l}function h(){return"undefined"!=typeof window&&window&&window.localStorage?window.localStorage:"undefined"!=typeof globalThis&&globalThis.localStorage?globalThis.localStorage:null}function m(e,t){if(!e)return;const n=JSON.stringify(t);u(e,i,n)}function y(e){const t=function(e){const t=c(e,i);if(!t||"string"!=typeof t)return{version:1,buckets:{}};try{const e=JSON.parse(t);if(!e||"object"!=typeof e)return{version:1,buckets:{}};const n={},r=e.buckets&&"object"==typeof e.buckets?e.buckets:{};for(const[e,t]of Object.entries(r)){if(!e)continue;const r=f("object"==typeof t&&null!==t?t.bucket:t);if(null==r)continue;const o=d(t?.assignedAt??t?.updatedAt??null),a=d(t?.expiresAt??null),i=t?.feature?p(t.feature):null,s=t?.screen?p(t.screen):null;n[e]={bucket:r,assignedAt:o||null,expiresAt:a||null,source:t?.source?String(t.source):null,feature:i,screen:s}}return{version:Number.isFinite(e.version)?Number(e.version):1,buckets:n}}catch{return{version:1,buckets:{}}}}(e);return t.buckets&&"object"==typeof t.buckets||(t.buckets={}),t}function b(e,{source:t=null,feature:n=null,screen:r=null,now:o=new Date,expiresAt:a=null}={}){return{bucket:e,assignedAt:d(o)||null,expiresAt:a?d(a):null,source:t||null,feature:n?p(n):null,screen:r?p(r):null}}function _(e,t){if(!e||!e.expiresAt)return!1;const n=Date.parse(e.expiresAt);return!!Number.isFinite(n)&&t>n}function w(e,t){let n=!1;for(const[r,o]of Object.entries(e.buckets))_(o,t)&&(delete e.buckets[r],n=!0);return n}function A(e,t,n){const r=e.buckets[l];if(r&&!_(r,n))return r;const o=new Date(n),i=f(function(e){return f(c(e,a))}(t)),s=i??f(Math.floor(100*Math.random())),d=b(s,{source:null!=i?"legacy":"generated",now:o});return e.buckets[l]=d,t&&(u(t,a,s),m(t,e)),d}function S(e){if(null==e)return[];if("string"==typeof e)try{return S(JSON.parse(e))}catch{const t=f(e);return null!=t?[{scope:l,bucket:t}]:[]}if("number"==typeof e){const t=f(e);return null!=t?[{scope:l,bucket:t}]:[]}if(Array.isArray(e))return e.flatMap(e=>S(e));if("object"!=typeof e)return[];const t=[],n=["default","global"];for(const r of n)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r];n&&"object"==typeof n&&!Array.isArray(n)?t.push(...S({scope:l,...n})):t.push(...S({scope:l,bucket:n}))}if(Object.prototype.hasOwnProperty.call(e,"features")){const n=e.features;if(n&&"object"==typeof n)for(const[e,r]of Object.entries(n))t.push(...S({feature:e,...r&&"object"==typeof r?r:{bucket:r}}))}if(Object.prototype.hasOwnProperty.call(e,"screens")||Object.prototype.hasOwnProperty.call(e,"pages")){const n=e.screens||e.pages;if(n&&"object"==typeof n)for(const[e,r]of Object.entries(n))t.push(...S({screen:e,...r&&"object"==typeof r?r:{bucket:r}}))}const r=new Set(["features","screens","pages","default","global","scope","feature","flag","name","screen","page","bucket","value","assignment","assignedAt","updatedAt","expiresAt","source","remove"]);for(const[n,o]of Object.entries(e))r.has(n)||t.push(...S({scope:n,...o&&"object"==typeof o?o:{bucket:o}}));const o=g(e),a=f(e.bucket??e.value??e.assignment??null);return(!0===e.remove||null===e.bucket||null===e.value)&&o?t.push({scope:o,remove:!0}):o&&null!=a&&t.push({scope:o,bucket:a,feature:e.feature??null,screen:e.screen??null,source:e.source??null,assignedAt:e.assignedAt??e.updatedAt??null,expiresAt:e.expiresAt??null}),t}function v(e,{source:t=null,now:n=()=>new Date}={}){const r=h(),o=y(r),i=n instanceof Date?n.getTime():Number(n),s=Number.isFinite(i)?i:Date.now();let c=w(o,s);const f=S(e);if(!f.length)return c&&r&&m(r,o),o.buckets;const d=new Date(s),p=new Set;for(const e of f){if(!e||!e.scope)continue;if(p.has(e.scope)&&delete o.buckets[e.scope],p.add(e.scope),e.remove){o.buckets[e.scope]&&(delete o.buckets[e.scope],c=!0);continue}const n=b(e.bucket,{source:e.source||t||null,feature:e.feature||null,screen:e.screen||null,now:e.assignedAt?new Date(e.assignedAt):d,expiresAt:e.expiresAt||null});o.buckets[e.scope]=n,e.scope===l&&r&&u(r,a,e.bucket),c=!0}return c&&r&&m(r,o),o.buckets}function E(e={}){const t=h(),n=y(t),r=Date.now();let o=w(n,r);const a=g(e)||l;let i=n.buckets[a];if(!i||_(i,r)){const e=A(n,t,r);i=a===l?e:null}if(!i){i=A(n,t,r)}return o&&t&&m(t,n),i?.bucket??0}const k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:null,T="__GW2_FETCH_GUARD_INSTALLED__";if(k&&"function"==typeof k.fetch&&!k[T]){const pn=k.fetch;let gn=M(k)||"http://localhost";const hn=()=>{const t=M(k);t&&gn!==t&&(gn=t);const n=function(){try{return e()}catch{return null}}(),r=function(e){if("string"!=typeof e)return"off";const t=e.trim().toLowerCase();if(!t)return"off";const n=t.replace(/[_\s]+/g,"-");if(["off","disabled","disable","none","0","false"].includes(n))return"off";if(["enforce","block","blocked","deny","enforced","strict","on","true"].includes(n))return"enforce";if(["report-only","report","monitor","monitoring","warn","warning"].includes(n))return"report-only";return"off"}(n?.FETCH_GUARD_MODE),o=function(e){if("string"!=typeof e)return null;const t=e.trim();return t||null}(n?.FETCH_GUARD_REPORT_URL),a=function(e,t){const n=new Set,r=e=>{e&&(Array.isArray(e)?e.forEach(r):n.add(e))},o=e=>{if(e||0===e)if(Array.isArray(e))e.forEach(o);else if("string"!=typeof e)try{const n=I(String(e),t);r(n)}catch{}else e.split(",").forEach(e=>{const n=I(e.trim(),t);r(n)})},a=[e?.API_BASE_URL,e?.MARKET_CSV_URL,"/api","api","/backend/api","backend/api","/recipe-tree","https://api.guildwars2.com","https://api.datawars2.ie"],i=e?.FETCH_GUARD_WHITELIST,s=function(e){if(Array.isArray(e))return e.length>0;if(null==e)return!1;if("string"==typeof e)return e.split(",").some(e=>e.trim());return!0}(i);o(a),o(i),o(e?.fetchGuardWhitelist),o(e?.fetchWhitelist),o(e?.FETCH_WHITELIST),s||o(e?.CONNECT_ALLOWLIST);return Array.from(n)}(n,t);return{mode:r,reportUrl:o,whitelist:a,locationOrigin:t}},mn=(e,t,n)=>{if("off"===n.mode)return;const r=`[fetchGuard] ${e}: ${t}`;try{"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(r)}catch{}if(!n.reportUrl)return;let o;try{o=JSON.stringify({source:"fetchGuard",reason:e,targetUrl:t,mode:n.mode,timestamp:Date.now(),locationOrigin:n.locationOrigin})}catch{o=null}if(o){try{if("function"==typeof k.navigator?.sendBeacon)return void k.navigator.sendBeacon(n.reportUrl,o)}catch{}try{if("function"==typeof k.Image){const e=encodeURIComponent(o),t=function(e,t,n){if(!e)return null;try{const r=new URL(e,n);return r.searchParams.append("payload",t),r.href}catch{try{const n=e.includes("?")?"&":"?";return`${e}${n}payload=${t}`}catch{return null}}}(n.reportUrl,e,gn);if(!t)return;const r=new k.Image;try{"referrerPolicy"in r&&(r.referrerPolicy="no-referrer")}catch{}const a=function(e){const t="__FETCH_GUARD_REPORT_IMAGES__";if(!e[t])try{Object.defineProperty(e,t,{value:new Set,configurable:!0,enumerable:!1,writable:!1})}catch{e[t]=new Set}return e[t]}(k);a.add(r);const i=()=>a.delete(r);try{r.onload=i,r.onerror=i}catch{}r.src=t}}catch{}}},yn=function(e,t){const n=hn(),r=function(e,t){if(!e&&""!==e)return null;const n=e=>{try{return new URL(e,t)}catch{return null}};if("undefined"!=typeof URL)try{if(e instanceof URL)return e}catch{}if("undefined"!=typeof Request)try{if(e instanceof Request)return n(e.url)}catch{}if("string"==typeof e)return n(e);if(e&&"string"==typeof e.url)return n(e.url);return null}(e,gn);if(!r||"off"===n.mode||function(e,t){if(!e)return!1;const n="string"==typeof e.hostname?e.hostname.toLowerCase():"",r="string"==typeof e.origin?e.origin:"";let o="";if(r&&"null"!==r)try{o=new URL(r).hostname.toLowerCase()}catch{const e=r.toLowerCase(),t=e.indexOf("://");o=t>=0?e.slice(t+3):e}for(const r of t)switch(r.type){case"wildcard":return!0;case"origin":if(e.origin===r.value)return!0;break;case"href":if(e.href.startsWith(r.value))return!0;break;case"hostname":if(n===r.value)return!0;if(o&&o===r.value)return!0;break;case"hostname-pattern":if(O(n,r.value))return!0;if(O(o,r.value))return!0;break;case"pathname":if(e.pathname.startsWith(r.value))return!0}return!1}(r,n.whitelist))return pn.call(this,e,t);let o;var a;a=r,o=a?.pathname.includes("/backend/")?"Legacy backend fetch detected":function(e,t){return!!e&&(!!t&&("null"!==e.origin&&e.origin!==t))}(r,n.locationOrigin)?"External fetch detected":"Blocked fetch detected";const i=function(e,t){if(e?.href)return e.href;if("string"==typeof t)return t;if(t&&"string"==typeof t.url)return t.url;return"unknown target"}(r,e);return mn(o,i,n),"enforce"===n.mode?Promise.reject(function(e,t){const n=new Error(`[fetchGuard] ${e}: ${t}`);return n.name="FetchGuardError",n.reason=e,n.url=t,n}(o,i)):pn.call(this,e,t)};yn.originalFetch=pn,k.fetch=yn,k[T]=!0}function M(e){if(!e||"object"!=typeof e)return;const t=e.location&&"object"==typeof e.location?e.location:null,n=N(t?.origin);if(n)return n;const r=N(e.origin),o=function(e,t){if("string"!=typeof e)return null;const n=e.trim();if(!n)return null;try{return N(new URL(n).origin)}catch{if(!t)return null;try{return N(new URL(n,t).origin)}catch{return null}}}(t?.href,r);return o||(r||void 0)}function N(e){if("string"!=typeof e)return null;const t=e.trim();return t&&"null"!==t.toLowerCase()?t:null}function I(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=n.replace(/^['"]|['"]$/g,"");if(!r)return null;const o=r.toLowerCase();if("self"===o){const e=N(t);return e?{type:"origin",value:e}:{type:"pathname",value:"/recipe-tree"}}if("*"===o)return{type:"wildcard"};if(/^\*\.[^*]+/.test(r)){const e=r.slice(2).toLowerCase();return e?{type:"hostname-pattern",value:e}:null}if(r.startsWith("//"))try{return{type:"origin",value:new URL(r,t||"http:").origin}}catch{return null}if(/^[a-zA-Z]+:\/\//.test(r))try{const e=new URL(r);return r.endsWith("/"),{type:"href",value:e.href}}catch{return null}if(r.startsWith("/"))return{type:"pathname",value:r};if(r.includes("://"))try{return{type:"href",value:new URL(r).href}}catch{return null}return r.includes(".")?{type:"hostname",value:r.toLowerCase()}:{type:"pathname",value:r.startsWith("/")?r:`/${r}`}}function O(e,t){if(!e||!t)return!1;const n=e.toLowerCase(),r=t.toLowerCase().replace(/^\.+/,"");return!!r&&(n===r||n.endsWith(`.${r}`))}const C=[];function j(){const e=Date.now()-6e4;for(;C.length&&C[0]<e;)C.shift()}function L(){j();const e=C.length;return e>5?"down":e>0?"slow":"ok"}let R;function U(){if("undefined"==typeof document)return;const e=L();R||(R=document.createElement("div"),R.id="api-status-indicator",R.style.position="fixed",R.style.bottom="10px",R.style.right="10px",R.style.padding="4px 8px",R.style.background="rgba(0,0,0,0.7)",R.style.color="#fff",R.style.borderRadius="4px",R.style.zIndex="10000",R.style.display="none",document.body.appendChild(R)),"ok"===e?R.style.display="none":(R.textContent="slow"===e?"API lenta":"API caída",R.style.display="block")}var $={recordFailure:function(){C.push(Date.now()),j(),U()},recordSuccess:function(){j(),U()},getState:L,getBackoff:function(){const e=L();return"down"===e?5e3:"slow"===e?1e3:0}};async function P(e,t={}){const{timeout:n=8e3,retries:r=3,backoff:o=300,signal:a,...i}=t;for(let t=0;t<=r;t++){const s=new AbortController,l=setTimeout(()=>s.abort(),n);a&&(a.aborted?s.abort():a.addEventListener("abort",()=>s.abort(),{once:!0}));try{const t=await fetch(e,{...i,signal:s.signal});return clearTimeout(l),$.recordSuccess(),t}catch(e){if(clearTimeout(l),$.recordFailure(),a?.aborted||t===r)throw e;const n=o*Math.pow(2,t);await new Promise(e=>setTimeout(e,n))}}}const D=Object.prototype.hasOwnProperty;function x(e){return null==e?[]:Array.isArray(e)?e:[e]}function F(e,t){const n=e&&"object"==typeof e&&!Array.isArray(e)?{...e}:{errors:[]};Array.isArray(n.errors)||(n.errors=x(n.errors));const r=function(e,t){if(e&&"string"==typeof e.traceId&&e.traceId)return e.traceId;if(t&&"object"==typeof t&&!Array.isArray(t)){if("string"==typeof t.traceId&&t.traceId)return t.traceId;const e=t.meta&&"object"==typeof t.meta?t.meta.traceId:null;if("string"==typeof e&&e)return e}return null}(n,t);return r?n.traceId=r:D.call(n,"traceId")||(n.traceId=null),n}function B(e,t,n){return{data:e,meta:F(t,n)}}function W(e){if(null==e)return B(null,{errors:[]},e);if("object"!=typeof e||e instanceof Response)return B(e,{errors:[]},e);if(Array.isArray(e))return B(e,{errors:[]},e);if(D.call(e,"data")){const t=D.call(e,"meta")&&"object"==typeof e.meta?{...e.meta,errors:x(e.meta?.errors)}:{errors:[]};return B(e.data,t,e)}if(D.call(e,"meta")){return B(null,"object"==typeof e.meta?{...e.meta,errors:x(e.meta?.errors)}:{errors:[]},e)}const{errors:t,...n}=e;return B(n,{errors:x(t)},e)}var G=Object.freeze({__proto__:null,normalizeApiResponse:W,unwrapApiResponse:function(e){const{data:t}=W(e);return t}});function H(e){const t=Number(e);return Number.isFinite(t)?t:e}async function q(e=[],t={}){if(!Array.isArray(e)||0===e.length)return{priceMap:new Map,iconMap:new Map,rarityMap:new Map,meta:null};const n=new URLSearchParams({ids:e.join(","),lang:"es"}),r=await P(`/api/aggregate/bundle?${n.toString()}`);if(!r.ok)throw new Error(`Error ${r.status} al consultar el agregado de bundle`);if(!(r.headers.get("content-type")||"").includes("application/json"))throw new Error("Respuesta no válida del agregado de bundle");const o=await r.json().catch(()=>null);if(!o||"object"!=typeof o)throw new Error("Datos no válidos del agregado de bundle");const a=new Map,i=new Map,s=new Map;o.priceMap&&"object"==typeof o.priceMap&&Object.entries(o.priceMap).forEach(([e,t])=>{if(t&&"object"==typeof t){const n=H(e);a.set(n,t)}}),o.iconMap&&"object"==typeof o.iconMap&&Object.entries(o.iconMap).forEach(([e,n])=>{if(n){const r=H(e);i.set(r,n),t.iconCache&&"object"==typeof t.iconCache&&(t.iconCache[r]=n)}}),o.rarityMap&&"object"==typeof o.rarityMap&&Object.entries(o.rarityMap).forEach(([e,n])=>{if(n){const r=H(e);s.set(r,n),t.rarityCache&&"object"==typeof t.rarityCache&&(t.rarityCache[r]=n)}});const l=e.map(H),c=Array.isArray(o.errors)?o.errors.length>0:Boolean(o.errors),u=l.filter(e=>!a.has(e)||!i.has(e)||!s.has(e));if(c||u.length>0)throw new Error("Datos incompletos del agregado de bundle");return{priceMap:a,iconMap:i,rarityMap:s,meta:o.meta||null}}const J={item:null,recipe:null,price:3e5,history:864e5,bundle:3e5},Q="undefined"!=typeof window&&"BroadcastChannel"in window?new BroadcastChannel("cache-sync"):null;let z=null;function K(e){Q&&Q.postMessage({type:"delete",key:e})}const V=new Map;!function(e){z=e,Q&&Q.addEventListener("message",({data:e})=>{const{type:t,key:n,entry:r}=e||{};if("request-bundles"!==t)t&&n&&("set"===t&&r?z.set(n,r):"delete"===t&&z.delete(n));else{if(!z)return;z.forEach((e,t)=>{t.startsWith("bundle_")&&Q.postMessage({type:"set",key:t,entry:e})})}})}(V),Q&&Q.postMessage({type:"request-bundles"});const Y="undefined"!=typeof localStorage,X=new Map;function Z(e){try{return JSON.parse(e)}catch{return null}}function ee(e,t){if(Y)try{localStorage.setItem(e,function({value:e,expiresAt:t,etag:n,lastModified:r,lang:o,source:a,fallback:i}){return JSON.stringify({value:e,expiresAt:t,etag:n,lastModified:r,lang:o,source:a,fallback:i})}(t))}catch{}}function te(e,t,n=void 0,r={}){if(void 0===n){const t=e.split("_")[0];n=J[t]}const o=null==n?null:Date.now()+n,{etag:a=null,lastModified:i=null,lang:s=null,source:l=null,fallback:c=null}=r,u={value:t,expiresAt:o,updatedAt:(new Date).toISOString(),etag:a,lastModified:i,lang:s,source:l,fallback:c};V.set(e,u),ee(e,{value:t,expiresAt:o,etag:a,lastModified:i,lang:s,source:l,fallback:c}),function(e,t){Q&&Q.postMessage({type:"set",key:e,entry:t})}(e,u)}function ne(e,t=!1){let n=V.get(e);if(!n){const t=function(e){if(!Y)return null;const t=localStorage.getItem(e);if(!t)return null;const n=Z(t);return n||(localStorage.removeItem(e),null)}(e);if(t){const{value:r,expiresAt:o=null,etag:a=null,lastModified:i=null,lang:s=null,source:l=null,fallback:c=null}=t;n={value:r,expiresAt:o,updatedAt:(new Date).toISOString(),etag:a,lastModified:i,lang:s,source:l,fallback:c},V.set(e,n)}}return n?n.expiresAt&&Date.now()>n.expiresAt?(V.delete(e),Y&&localStorage.removeItem(e),K(e),null):t?n:n.value:null}function re(e,t={}){const n=function(e,{method:t="GET",headers:n={}}={}){return`${e}|${t.toUpperCase()}|${JSON.stringify(n)}`}(e,t),r=X.get(n)||P(e,t).finally(()=>X.delete(n));return X.set(n,r),r.then(e=>e.clone())}!function(){if(!Y)return;const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t),r=Z(localStorage.getItem(n));if(!r)continue;const{expiresAt:o}=r;o&&Date.now()>o&&e.push(n)}e.forEach(e=>{localStorage.removeItem(e),K(e)})}();const oe=new Map;function ae(){return"sessionStorage"===function(){const t=e();return t?.priceCacheStrategy||"sessionStorage"}()}function ie(e){return`price_${e}`}function se(e){if(!ae()||"undefined"==typeof sessionStorage)return null;const t=sessionStorage.getItem(ie(e));if(!t)return null;try{const{value:n,expires:r}=JSON.parse(t);return r&&Date.now()>r?(sessionStorage.removeItem(ie(e)),null):n}catch{return sessionStorage.removeItem(ie(e)),null}}async function le(t){if(!Array.isArray(t)||0===t.length)return new Map;const n=e();if("redis"===(n?.priceCacheStrategy||"sessionStorage")){const e=`/backend/api/itemBundle.php?ids=${t.join(",")}`,n=await fetch(e);if(!n.ok)throw new Error("Price fetch failed");const r=await n.json().catch(()=>null),{data:o,meta:a}=W(r),i=Array.isArray(o)?o:[];!Array.isArray(o)&&Array.isArray(a?.errors)&&a.errors.length&&console.warn("itemBundle precios devolvió errores",a.errors);const s=new Map;return i.forEach(e=>{const t=e.market||{};s.set(e.id,{buy_price:t.buy_price||0,sell_price:t.sell_price||0})}),s}{const e=["id","buy_price","sell_price"].join(","),r=Boolean(n?.FEATURE_MARKET_CSV_EXTERNAL)?n?.MARKET_CSV_URL||"https://api.datawars2.ie/gw2/v1/items/csv":function(e,t){const n=("string"==typeof e?e.trim():"").replace(/\/+$/,""),r=String(t).replace(/^\/+/,"");return n?r?`${n}/${r}`:n||"/":r?`/${r}`:"/"}(n?.API_BASE_URL||"/api","/market.csv"),o=new URLSearchParams;o.set("fields",e),o.set("ids",t.join(","));const a=`${r}?${o.toString()}`,i=await fetch(a);if(!i.ok)throw new Error("Price fetch failed");const s=(await i.text()).trim().split("\n"),l=s[0].split(","),c=new Map;for(let e=1;e<s.length;e++){if(!s[e])continue;const t=s[e].split(","),n={};l.forEach((e,r)=>{const o=t[r];n[e]=void 0!==o?isNaN(o)?o:Number(o):null}),null!=n.id&&c.set(n.id,{buy_price:n.buy_price||0,sell_price:n.sell_price||0})}return c}}async function ce(e=[]){const t=new Map,n=[];if(e.forEach(e=>{if(e=Number(e),oe.has(e))return void t.set(e,oe.get(e));const r=se(e);r?(oe.set(e,r),t.set(e,r)):n.push(e)}),n.length)try{(await le(n)).forEach((e,n)=>{oe.set(n,e),function(e,t){if(ae()&&"undefined"!=typeof sessionStorage)try{sessionStorage.setItem(ie(e),JSON.stringify({value:t,expires:Date.now()+3e5}))}catch{}}(n,e),t.set(n,e)})}catch(e){console.error("Error preloading prices",e)}return e.forEach(e=>{e=Number(e),!t.has(e)&&oe.has(e)&&t.set(e,oe.get(e)),t.has(e)||t.set(e,{buy_price:0,sell_price:0})}),t}async function ue(e){if(e=Number(e),oe.has(e))return oe.get(e);const t=se(e);if(t)return oe.set(e,t),t;return(await ce([e])).get(e)}function fe(){if(oe.clear(),ae()&&"undefined"!=typeof sessionStorage)for(let e=sessionStorage.length-1;e>=0;e--){const t=sessionStorage.key(e);t&&t.startsWith("price_")&&sessionStorage.removeItem(t)}}var de=Object.freeze({__proto__:null,clearCache:fe,getPrice:ue,preloadPrices:ce});const pe=new Map;function ge(e){return pe.get(e)?.promise}function he(e,t,n){return pe.set(e,{promise:t,controller:n}),t.finally(()=>pe.delete(e)),t}function me(e){const t=pe.get(e);t?.controller&&t.controller.abort()}function ye(e,t={},n=null,r=null,o){const a=pe.get(e);a&&a.controller?.abort(),n&&!r&&(r=ne(n,!0));const i={...t.headers||{}};r?.etag&&(i["If-None-Match"]=r.etag),r?.lastModified&&(i["If-Modified-Since"]=r.lastModified);const s=o?null:new AbortController,l=o??t.signal??s?.signal;return he(e,P(e,{...t,headers:i,signal:l}).then(async e=>304===e.status&&r?new Response(JSON.stringify(r.value),{status:200,headers:{"X-Cache":"HIT",ETag:r.etag||"","Last-Modified":r.lastModified||""}}):e).catch(e=>{if(e instanceof DOMException&&"AbortError"===e.name)throw e;throw e}),s).then(e=>e.clone())}var be={fetchWithCache:ye,getRequest:ge,setRequest:(e,t)=>he(e,t,null),abortRequest:me},_e=Object.freeze({__proto__:null,abortRequest:me,default:be,fetchWithCache:ye,getRequest:ge});const we=new Set(["1","true","yes","on"]),Ae=new Set(["0","false","no","off"]);function Se(e,t=!1){if("boolean"==typeof e)return e;if(null==e)return t;const n=String(e).trim().toLowerCase();return!!we.has(n)||!Ae.has(n)&&t}function ve(e){if(!e)return null;switch(String(e).trim().toLowerCase().replace(/[\-_]/g,"")){case"useprecomputed":case"featureuseprecomputed":case"precomputed":case"precomputedon":return"usePrecomputed";case"donesaggregate":case"featuredonesaggregate":case"donesagg":case"donesaggregated":return"donesAggregate";default:return null}}let Ee=null,ke=null,Te=null;function Me(){if(null===ke){const{FEATURE_USE_PRECOMPUTED:t}=e();ke=Se(t,!1)}return ke}function Ne(){if(null===Te){const{FEATURE_DONES_AGGREGATE:t}=e();Te=Se(t,!1)}return Te}function Ie(){if(Ee)return Ee;const e={usePrecomputed:Me(),donesAggregate:Ne()};let t={};if("undefined"!=typeof window)try{const e=new URLSearchParams(window.location.search||"");t=function(e){if(!e)return{};const t={},n=Array.isArray(e)?e:String(e).split(",");for(const e of n){if(!e)continue;let n=e,r="true";if("string"==typeof e){const t=e.trim();if(!t)continue;if(t.includes(":")){const[e,o]=t.split(":",2).map(e=>e.trim());n=e,r=o}else if(t.includes("=")){const[e,o]=t.split("=",2).map(e=>e.trim());n=e,r=o}else n=t,r="true"}const o=ve(n);o&&(t[o]=Se(r,!0))}return t}(e.get("ff"))}catch(e){}return Ee={...e,...t},Ee}function Oe(e){if(!e)return!1;const t=Ie();return Boolean(t[e])}const Ce=new Map;function je(){try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage;if("undefined"!=typeof sessionStorage)return sessionStorage}catch(e){console.warn("Sesión de almacenamiento no disponible",e)}return null}function Le(e,n){return`aggregate:item:${"string"==typeof n&&n?n:t()}:${e}`}function Re(e,t){const n=function(e){const t=je();if(t)try{return t.getItem(e)}catch(e){console.warn("No se pudo leer sessionStorage",e)}return Ce.get(e)??null}(Le(e,t));if(!n)return null;try{const e=JSON.parse(n);return e&&"object"==typeof e?{etag:"string"==typeof e.etag&&e.etag?e.etag:null,lastModified:"string"==typeof e.lastModified&&e.lastModified?e.lastModified:null,data:e.data??null,meta:e.meta??null}:null}catch(e){return console.warn("No se pudo parsear el cache del agregado",e),null}}function Ue(e,t,{etag:n=null,lastModified:r=null,data:o=null,meta:a=null}={}){const i={etag:n||null,lastModified:r||null,data:o??null,meta:a??null};!function(e,t){const n=je();if(n)try{null===t?n.removeItem(e):n.setItem(e,t)}catch(e){console.warn("No se pudo escribir en sessionStorage",e)}null===t?Ce.delete(e):Ce.set(e,t)}(Le(e,t),JSON.stringify(i))}function $e(e,t){const n=String(t||"").toLowerCase();if(!e||!e.headers)return null;if("function"==typeof e.headers.get){const r=e.headers.get(t);return r||e.headers.get(n)}const r="function"==typeof e.headers.entries?Array.from(e.headers.entries()):Object.entries(e.headers);for(const[e,t]of r)if(String(e).toLowerCase()===n)return Array.isArray(t)?t[0]:t;return null}async function Pe(e,{signal:o}={}){if(!Number.isFinite(Number(e))||Number(e)<=0)throw new Error("ID de ítem inválido");const a=Number(e),i=Re(a,t()),s={};i?.etag&&(s["If-None-Match"]=i.etag),i?.lastModified&&(s["If-Modified-Since"]=i.lastModified);const{url:l,options:c,lang:u}=n(`/api/items/${a}/aggregate`,{signal:o,headers:s}),f=await P(l,c),d=$e(f,"ETag"),p=$e(f,"Last-Modified");if(304===f.status){if(i?.data){Ue(a,u,{etag:d||i.etag||null,lastModified:p||i.lastModified||null,data:i.data,meta:i.meta});const e=r({data:i.data,meta:i.meta});return{data:i.data,meta:i.meta,model:e,status:304,fromCache:!0}}throw new Error("Respuesta 304 sin datos en cache")}if(!($e(f,"content-type")||"").toLowerCase().includes("application/json"))throw new Error("Respuesta no válida del agregado");const g=await f.json().catch(()=>null),{data:h,meta:m}=W(g),y=r({data:h,meta:m});return Ue(a,u,{etag:d,lastModified:p,data:h,meta:m}),{data:h,meta:m,model:y,status:f.status,fromCache:!1}}function De(e){if("string"!=typeof e)return null;const t=e.trim();return t?t.toLowerCase():null}function xe(){return"undefined"==typeof document?null:document.getElementById("freshness-banner")}function Fe(e={}){const n=xe();if(!n)return;const{stale:r=!1,lastUpdated:o,generatedAt:a,warnings:i=[],errors:s=[],lang:l=null}=e,c=function(e){if(!e)return"";try{const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleString()}catch(e){return""}}(o||a),u=["freshness-banner"];r?u.push("freshness-banner--stale"):u.push("freshness-banner--fresh"),n.className=u.join(" ");const f=r?"Datos potencialmente desactualizados":"Datos actualizados",d=c?`Última generación: ${c}`:"",p=De(t()),g=De(l)||p,h=p&&g&&p!==g?`<span class="freshness-banner__lang">Mostrando contenido en ${g.toUpperCase()} (preferido: ${p.toUpperCase()})</span>`:"",m=Array.isArray(i)&&i.length?`<span class="freshness-banner__warnings">Avisos: ${i.join(", ")}</span>`:"",y=Array.isArray(s)&&s.length?`<span class="freshness-banner__errors">Errores: ${s.join(", ")}</span>`:"";n.innerHTML=`\n    <strong>${f}</strong>\n    ${d?`<span class="freshness-banner__timestamp">${d}</span>`:""}\n    ${h}\n    ${m}\n    ${y}\n  `,n.classList.remove("hidden")}function Be(){const e=xe();e&&(e.classList.add("hidden"),e.innerHTML="")}const We="undefined"!=typeof window?window:"undefined"!=typeof self?self:globalThis;function Ge(e){Array.isArray(e)&&qe(e,null),We.ingredientObjs=e}"undefined"!=typeof window&&(We.ingredientObjs=We.ingredientObjs||[],We.globalQty=We.globalQty||1,We._mainBuyPrice=We._mainBuyPrice||0,We._mainSellPrice=We._mainSellPrice||0,We._mainRecipeOutputCount=We._mainRecipeOutputCount||1);class He{constructor({id:e,name:t,icon:n,rarity:r,count:o,buy_price:a,sell_price:i,is_craftable:s,recipe:l,children:c=[],_parentId:u=null}){this._uid=He.nextUid++,this.id=e,this.name=t,this.icon=n,this.rarity=r,this.count=o,this.buy_price=a,this.sell_price=i,this.is_craftable=s,this.recipe=l||null,this.children=c,this.mode="buy",this.modeForParentCrafted="buy",this.expanded=!1,this._parentId=u,this._parent=null,this.countTotal=0,this.crafted_price=null,this.total_buy=0,this.total_sell=0,this.total_crafted=0}findRoot(){let e=this;for(;e._parent;)e=e._parent;return e}setMode(e){if(["buy","sell","crafted"].includes(e)){this.modeForParentCrafted=e;this.findRoot().recalc(We.globalQty||1,null),"function"==typeof We.safeRenderTable&&We.safeRenderTable()}}recalc(e=1,t=null,n={}){const{skipCountTotalUpdate:r=!1}=n,o=null==t,a=19675===this.id&&(77===this.count||38===this.count);if(o?this.countTotal=this.count*e:a?this.countTotal=this.count:r||(this.countTotal=t.countTotal*this.count),this.children&&this.children.length>0)if(a){const t=77===this.count?[250,250,250,1500]:[38,38,38,38];this.children.forEach((n,r)=>{n.countTotal=t[r]||0,n.total_buy=(n.buy_price||0)*n.countTotal,n.total_sell=(n.sell_price||0)*n.countTotal,n.recalc(e,this,{skipCountTotalUpdate:!0})})}else this.children.forEach(t=>t.recalc(e,this));o?this.children&&this.children.length>0?(this.total_buy=this.children.reduce((e,t)=>e+(t.total_buy||0),0),this.total_sell=this.children.reduce((e,t)=>e+(t.total_sell||0),0)):(this.total_buy=(this.buy_price||0)*this.countTotal,this.total_sell=(this.sell_price||0)*this.countTotal):a?(this.total_buy=this.children.reduce((e,t)=>e+(t.total_buy||0),0),this.total_sell=this.children.reduce((e,t)=>e+(t.total_sell||0),0)):(this.total_buy=(this.buy_price||0)*this.countTotal,this.total_sell=(this.sell_price||0)*this.countTotal),this.is_craftable&&this.children.length>0?(this.total_crafted=this.children.reduce((e,t)=>{switch(t.modeForParentCrafted){case"buy":default:return e+(t.total_buy||0);case"sell":return e+(t.total_sell||0);case"crafted":return e+(t.total_crafted||0)}},0),this.crafted_price=this.total_crafted/(this.recipe?.output_item_count||1),o||this.buy_price||this.sell_price||(this.total_buy=this.children.reduce((e,t)=>e+(t.total_buy||0),0),this.total_sell=this.children.reduce((e,t)=>e+(t.total_sell||0),0))):(this.total_crafted=null,this.crafted_price=null)}getBestPrice(){return"number"==typeof this.buy_price&&this.buy_price>0?this.buy_price:"number"==typeof this.crafted_price&&this.crafted_price>0?this.crafted_price:0}}function qe(e,t=null){if(Array.isArray(e))for(const n of e)Object.setPrototypeOf(n,He.prototype),"number"==typeof n._uid&&He.nextUid<=n._uid&&(He.nextUid=n._uid+1),n._parent=t,t&&(n._parentId=t._uid),Array.isArray(n.children)&&n.children.length>0?qe(n.children,n):n.children=[]}function Je(e){We.globalQty=e}function Qe(e){return e?e.map(e=>({id:e.id,expanded:e.expanded,children:Qe(e.children||[])})):[]}function ze(e,t){if(e&&t)for(let n=0;n<e.length;n++)t[n]&&(e[n].expanded=t[n].expanded,ze(e[n].children,t[n].children))}He.nextUid=0;let Ke={totalBuy:0,totalSell:0,totalCrafted:0};function Ve(e){const t=Number(e?.buy??e?.totalBuy??0),n=Number(e?.sell??e?.totalSell??0),r=Number(e?.crafted??e?.totalCrafted??0);Ke={totalBuy:Number.isFinite(t)?t:0,totalSell:Number.isFinite(n)?n:0,totalCrafted:Number.isFinite(r)?r:0}}function Ye(e,t){return e?Nt({ingredientTree:e,globalQty:t}).then(({updatedTree:t,totals:n})=>{function r(e,t){if(Object.assign(t,e),e.children&&t.children)for(let n=0;n<e.children.length;n++)r(e.children[n],t.children[n])}if(Array.isArray(t)&&qe(t,null),Array.isArray(t))for(let n=0;n<t.length;n++)r(t[n],e[n]);Ke=n||{totalBuy:0,totalSell:0,totalCrafted:0}}):Promise.resolve()}function Xe(){return Ke}function Ze(e,t,n){for(const r of e){if(String(r.id)===String(t)&&String(r._parentId)===String(n))return r;if(Array.isArray(r.children)&&r.children.length){const e=Ze(r.children,t,n);if(e)return e}}return null}function et(e,t){let n=e,r=null;for(let e=0;e<t.length;e++){const o=t[e];if(r=(n||[]).find(e=>String(e._uid)===String(o)||String(e.id)===String(o)),!r)return null;n=r.children}return r}function tt(e,t){for(const n of e){if(String(n._uid)===String(t))return n;if(n.children&&n.children.length){const e=tt(n.children,t);if(e)return e}}return null}function nt(e,t){for(const n of e){if(String(n.id)===String(t))return n;if(n.children&&n.children.length){const e=nt(n.children,t);if(e)return e}}return null}function rt(e,t,n=[]){if(!Array.isArray(e))return n;for(const r of e)String(r.id)===String(t)&&n.push(r),r.children&&r.children.length&&rt(r.children,t,n);return n}const ot=new Set;function at(e){return ot.add(e),e}function it(){ot.forEach(e=>e.abort()),ot.clear(),lt&&(lt.terminate(),lt=null)}async function st(e){const t=at(new AbortController),n=`item_${e}`,r=ne(n,!0),o={};r?.etag&&(o["If-None-Match"]=r.etag),r?.lastModified&&(o["If-Modified-Since"]=r.lastModified);try{try{const r=await ye(`/backend/api/itemBundle.php?ids=${e}`,{headers:o,signal:t.signal});if(r.ok){const e=await r.json().catch(()=>null),{data:t,meta:o}=W(e),a=Array.isArray(t)?t[0]:null;if(a&&a.item){const e=a.item;a.nested_recipe&&(e.nested_recipe=a.nested_recipe);const t=r.headers.get("ETag"),i=r.headers.get("Last-Modified"),s=t||i?null:void 0;return e.lastUpdated=(new Date).toISOString(),te(n,e,s,{etag:t,lastModified:i}),Array.isArray(o?.errors)&&o.errors.length&&console.warn("itemBundle devolvió errores",o.errors),e}Array.isArray(o?.errors)&&o.errors.length&&console.warn("itemBundle respondió sin datos",o.errors)}}catch(e){}const a=await ye(`https://api.guildwars2.com/v2/items/${e}?lang=es`,{headers:o,signal:t.signal});if(304===a.status&&r)return r.value;if(!a.ok)throw new Error(`Error ${a.status} obteniendo datos del ítem ${e}`);const i=await a.json();i.lastUpdated=(new Date).toISOString();const s=a.headers.get("ETag"),l=a.headers.get("Last-Modified");return te(n,i,s||l?null:void 0,{etag:s,lastModified:l}),i}finally{ot.delete(t)}}let lt=null;function ct(e){if(!e||"object"!=typeof e)return null;let t;try{t="function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}catch(n){t={...e}}const n=Array.isArray(t.children)?t.children:Array.isArray(t.components)?t.components:[];return t.children=n.map(e=>ct(e)).filter(e=>null!==e),"components"in t&&delete t.components,t}async function ut(e,t){if(!t||!t.ingredients||0===t.ingredients.length)return We._mainRecipeOutputCount=t&&t.output_item_count||1,[];if(t.nested_recipe){We._mainRecipeOutputCount=t.output_item_count||1;const e=function(e){if(!e)return[];if(Array.isArray(e))return e.map(e=>ct(e)).filter(e=>null!==e);if("object"==typeof e){if(Array.isArray(e.tree))return e.tree.map(e=>ct(e)).filter(e=>null!==e);if(Array.isArray(e.children))return e.children.map(e=>ct(e)).filter(e=>null!==e);if(Array.isArray(e.components))return e.components.map(e=>ct(e)).filter(e=>null!==e);const t=ct(e);return t?[t]:[]}return[]}(t.nested_recipe).map(e=>dt(e,null));return qe(e,null),e.forEach(e=>e.recalc(We.globalQty,null)),e}return lt&&lt.terminate(),lt=new Worker(new URL("./workers/ingredientTreeWorker.js",import.meta.url),{type:"module"}),new Promise((n,r)=>{const o=e=>{lt.removeEventListener("message",o),lt.removeEventListener("error",a);let t=e.data?.tree||[];lt=null,Array.isArray(t)||(t=t&&"object"==typeof t?Array.isArray(t.children)?t.children:[t]:[]);const r=t.map(e=>dt(e,null));qe(r,null),r.forEach(e=>e.recalc(We.globalQty,null)),n(r)},a=e=>{lt.removeEventListener("message",o),lt.removeEventListener("error",a),lt=null,console.error("Error en ingredientTreeWorker:",e?.message||e,e);const t="Error procesando ingredientes"+(e?.message?`: ${e.message}`:"");We.StorageUtils&&"function"==typeof We.StorageUtils.showToast?We.StorageUtils.showToast(t,"error"):"function"==typeof alert&&alert(t),r(e)};lt.addEventListener("message",o),lt.addEventListener("error",a);const i=function(){const e=We&&"object"==typeof We.__RUNTIME_CONFIG__?We.__RUNTIME_CONFIG__:null;if(!e)return null;const t={};return"string"==typeof e.FETCH_GUARD_MODE&&(t.FETCH_GUARD_MODE=e.FETCH_GUARD_MODE),Array.isArray(e.FETCH_GUARD_WHITELIST)?t.FETCH_GUARD_WHITELIST=[...e.FETCH_GUARD_WHITELIST]:"string"==typeof e.FETCH_GUARD_WHITELIST&&(t.FETCH_GUARD_WHITELIST=e.FETCH_GUARD_WHITELIST.split(",").map(e=>e.trim()).filter(Boolean)),Object.prototype.hasOwnProperty.call(e,"FETCH_GUARD_REPORT_URL")&&(t.FETCH_GUARD_REPORT_URL=e.FETCH_GUARD_REPORT_URL),Array.isArray(e.CONNECT_ALLOWLIST)&&(t.CONNECT_ALLOWLIST=[...e.CONNECT_ALLOWLIST]),t}();lt.postMessage({type:"runtimeConfig",config:i}),lt.postMessage({type:"generateTree",mainItemId:e,mainRecipeData:t})})}async function ft(e){const t=at(new AbortController),n=`recipe_${e}`,r=ne(n);if(r)return ot.delete(t),r;try{const r=await ye(`https://api.guildwars2.com/v2/recipes/search?output=${e}`,{signal:t.signal});if(!r.ok)return null;const o=await r.json();if(!o||0===o.length)return null;const a=o[0],i=await ye(`https://api.guildwars2.com/v2/recipes/${a}?lang=es`,{signal:t.signal});if(!i.ok)throw new Error(`Error ${i.status} obteniendo datos de la receta ${a}`);const s=await i.json();return s.lastUpdated=(new Date).toISOString(),te(n,s),s}finally{ot.delete(t)}}function dt(e,t=null){const n=new He({id:e.id,name:e.name,icon:e.icon,rarity:e.rarity,count:e.count||1,recipe:e.recipe||null,buy_price:e.buy_price||0,sell_price:e.sell_price||0,is_craftable:e.is_craftable||!1,children:[],_parentId:t});return e.children&&e.children.length>0&&(n.children=e.children.map(e=>dt(structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e)),n._uid))),n}if("undefined"!=typeof window){void 0===We.comparativa&&(We.comparativa={});let bn=null;const _n=new Map;function wn(e,t=null){if(!e)return null;const n=new He({id:e.id,name:e.name,icon:e.icon,rarity:e.rarity,count:Number.isFinite(Number(e.count))?Number(e.count):1,buy_price:Number(e.buy_price||0),sell_price:Number(e.sell_price||0),is_craftable:Boolean(e.is_craftable),recipe:e.recipe||null,children:[],_parentId:t?t._uid:null});n.countTotal=Number(e.countTotal??n.count),n.total_buy=Number(e.total_buy||0),n.total_sell=Number(e.total_sell||0),n.total_crafted=null==e.total_crafted?null:Number(e.total_crafted||0),n.crafted_price=null==e.crafted_price?null:Number(e.crafted_price||0),n.mode=e.mode||"buy",n.modeForParentCrafted=e.modeForParentCrafted||"buy",n.expanded=Boolean(e.expanded),n._parent=t||null;const r=Array.isArray(e.children)?e.children:[];return n.children=r.map(e=>wn(e,n)),n}function An(){if(!Oe("usePrecomputed"))return void Be();const e=Array.from(_n.values()).filter(Boolean);if(!e.length)return void Be();let t=null,n=!1;const r=new Set,o=new Set;e.forEach(e=>{if(!e)return;e.stale&&(n=!0),(e.warnings||[]).forEach(e=>r.add(e)),(e.errors||[]).forEach(e=>o.add(e));const a=e.lastUpdated||e.generatedAt;a&&(!t||new Date(a)>new Date(t))&&(t=a)}),Fe({stale:n,lastUpdated:t,warnings:Array.from(r),errors:Array.from(o)})}function Sn(e){const t=Number.isFinite(Number(e))&&Number(e)>0?Number(e):1;let n=0,r=0,o=0;return(We.ingredientObjs||[]).forEach(e=>{const t=Number(e?.total_buy||0),a=Number(e?.total_sell||0),i=null==e?.total_crafted?t:Number(e.total_crafted||0);switch(n+=t,r+=a,e?.modeForParentCrafted){case"sell":o+=a;break;case"crafted":o+=i;break;default:o+=t}}),{totalBuy:n*t,totalSell:r*t,totalCrafted:o*t}}function vn(e){null==e?_n.clear():_n.delete(Number(e)),An()}async function En(e){const t=await ce(e);e.forEach(e=>{const n=t.get(e)||{},r=nt(We.ingredientObjs,e);r&&(r.buy_price=n.buy_price||0,r.sell_price=n.sell_price||0,"function"==typeof r.recalc&&r.recalc(We.globalQty||1,null))}),"function"==typeof We.safeRenderTable&&We.safeRenderTable()}function kn(){const e=We.ingredientObjs?We.ingredientObjs.map(e=>e.id):[];if(bn&&(clearInterval(bn),bn=null),0===e.length)return;const t=()=>En(e);t(),bn=setInterval(t,6e4)}We.comparativa.getPrecomputedTotals=Sn,We.comparativa.clearComparativaMeta=vn,We.comparativa.updateFreshnessBanner=An,We.comparativa.agregarItemPorId=async function(e){if(We.ingredientObjs=We.ingredientObjs||[],We.globalQty=We.globalQty||1,We.ingredientObjs.some(t=>t.id==e))return;const t=document.getElementById("item-skeleton");if(Oe("usePrecomputed")){bn&&(clearInterval(bn),bn=null);try{"function"==typeof We.showSkeleton&&We.showSkeleton(t);const n=await Pe(e),a=n?.model||r({data:n?.data,meta:n?.meta}),{item:i,market:s,tree:l,meta:c,prices:u}=a||{};if(!i)return"function"==typeof We.hideSkeleton&&We.hideSkeleton(t),We.showError?.("No se encontraron datos precomputados para este ítem."),_n.delete(Number(e)),void An();const f=u?.hasData?u:o(s);let d=l?wn(l,null):null;d||(d=new He({id:i.id,name:i.name,icon:i.icon,rarity:i.rarity,count:1,buy_price:Number(f?.unit?.buy??s?.unitBuyPrice??0),sell_price:Number(f?.unit?.sell??s?.unitSellPrice??0),is_craftable:!1,recipe:null,children:[]}),d.total_buy=Number(f?.totals?.buy??s?.buy??0),d.total_sell=Number(f?.totals?.sell??s?.sell??0),d.total_crafted=Number(f?.totals?.crafted??s?.crafted??0));const p=f?.totals||{};Number.isFinite(Number(p.buy))?d.total_buy=Number(p.buy):s&&Number.isFinite(Number(s.buy))&&(d.total_buy=Number(s.buy)),Number.isFinite(Number(p.sell))?d.total_sell=Number(p.sell):s&&Number.isFinite(Number(s.sell))&&(d.total_sell=Number(s.sell)),Number.isFinite(Number(p.crafted))?d.total_crafted=Number(p.crafted):s&&Number.isFinite(Number(s.crafted))&&(d.total_crafted=Number(s.crafted)),We._mainRecipeOutputCount=d?.recipe?.output_item_count||d?.output||1,We._mainBuyPrice=f?.unit?.buy??s?.unitBuyPrice??d.buy_price??0,We._mainSellPrice=f?.unit?.sell??s?.unitSellPrice??d.sell_price??0,We.ingredientObjs.push(d),_n.set(Number(d.id),c),An(),"function"==typeof We.safeRenderTable&&We.safeRenderTable(We._mainBuyPrice,We._mainSellPrice),"function"==typeof We.hideSkeleton&&We.hideSkeleton(t)}catch(e){"function"==typeof We.hideSkeleton&&We.hideSkeleton(t),console.error("Error agregando ítem precomputado",e),We.showError?.("No se pudo cargar el agregado del ítem.")}}else{_n.clear(),Be();try{"function"==typeof We.showSkeleton&&We.showSkeleton(t);const n=await st(e),r=await ft(e),o=await ue(e),a=Array.isArray(r?.ingredients)&&r.ingredients.length>0;let i;if(We._mainBuyPrice=o.buy_price||0,We._mainSellPrice=o.sell_price||0,r&&a){let t=await ut(e,r);Array.isArray(t)||(t=[]);const s=a&&0===t.length;if(s){const e="No se pudo construir el árbol de ingredientes. Mostrando el ítem sin receta.";We.StorageUtils&&"function"==typeof We.StorageUtils.showToast?We.StorageUtils.showToast(e,"error"):console.warn(e)}We._mainRecipeOutputCount=r.output_item_count||1,i=new He({id:n.id,name:n.name,icon:n.icon,rarity:n.rarity,count:1,buy_price:o.buy_price,sell_price:o.sell_price,is_craftable:!s,recipe:s?null:r,children:s?[]:t}),i.recalc(We.globalQty||1,null)}else We._mainRecipeOutputCount=r&&r.output_item_count||1,i=new He({id:n.id,name:n.name,icon:n.icon,rarity:n.rarity,count:1,buy_price:o.buy_price,sell_price:o.sell_price,is_craftable:!1,recipe:null,children:[]});We.ingredientObjs.push(i),kn(),"function"==typeof We.safeRenderTable&&("number"==typeof o.buy_price&&"number"==typeof o.sell_price?We.safeRenderTable(o.buy_price,o.sell_price):We.safeRenderTable()),"function"==typeof We.hideSkeleton&&We.hideSkeleton(t)}catch(e){"function"==typeof We.hideSkeleton&&We.hideSkeleton(t),alert("Error al agregar el ítem: "+(e?.message||e)),console.error("Error al agregar el ítem",e)}}},We.comparativa.handleSaveComparativa=async function(){if(!We.ingredientObjs||0===We.ingredientObjs.length)return void We.StorageUtils?.showToast("Agrega al menos un ítem a la comparativa","error");const e={ids:We.ingredientObjs.map(e=>e.id),nombres:We.ingredientObjs.map(e=>e.name),timestamp:Date.now()};We.StorageUtils&&"function"==typeof We.StorageUtils.saveComparativa?(await We.StorageUtils.saveComparativa(e),We.StorageUtils.showToast("Comparativa guardada")):alert("StorageUtils no está disponible.")},We.comparativa.loadComparativaFromURL=function(){const e=new URLSearchParams(We.location.search).get("ids");if(!e)return;const t=e.split(",").map(e=>parseInt(e,10)).filter(e=>!isNaN(e));if(0===t.length)return;We.ingredientObjs=We.ingredientObjs||[],We.globalQty=We.globalQty||1;const n=()=>{We.comparativa&&"function"==typeof We.comparativa.agregarItemPorId?(async()=>{const e=[];for(const n of t)try{await We.comparativa.agregarItemPorId(n)}catch(t){console.error("Error cargando ítem de la URL",n,t),e.push({id:n,error:t})}if(e.length>0){const t=`No se pudieron cargar ${e.length} ítems de la URL.`;We.StorageUtils?.showToast?We.StorageUtils.showToast(t,"error"):alert(t)}})():setTimeout(n,50)};n()}}function pt(e,t){return!e||!t||isNaN(e)||isNaN(t)||0===t?"-":(e/t*100).toFixed(1)+"%"}function gt(e){return Array.isArray(e)?e.map(e=>ht(e,null)):[]}function ht(e,t){const n=new He(e);return Object.assign(n,e),"number"==typeof e._uid&&(n._uid=e._uid,He.nextUid<=e._uid&&(He.nextUid=e._uid+1)),n._parent=t||null,n.children=Array.isArray(e.children)?e.children.map(e=>ht(e,n)):[],n}function mt(e,t){e&&e.forEach(e=>{e.recalc(t,null)})}function yt(e){let t=0,n=0,r=0;for(const o of e||[])switch(t+=o.total_buy||0,n+=o.total_sell||0,o.modeForParentCrafted){case"sell":r+=o.total_sell||0;break;case"crafted":r+=o.total_crafted||0;break;default:r+=o.total_buy||0}return{totalBuy:t,totalSell:n,totalCrafted:r}}function bt({ingredientTree:e=[],globalQty:t=1}={}){const n=gt(e);mt(n,t);return{updatedTree:n,totals:yt(n)}}"undefined"!=typeof window&&(We.setIngredientObjs=Ge,We.setGlobalQty=Je,We.snapshotExpandState=Qe,We.restoreExpandState=ze,We.recalcAll=Ye,We.getTotals=Xe,We.findIngredientByIdAndParent=Ze,We.findIngredientByPath=et,We.findIngredientByUid=tt,We.findIngredientById=nt,We.findIngredientsById=rt,We.calcPercent=pt);const _t=[];let wt=null,At=null,St=!1;const vt=(()=>{try{const e=new URL(".",import.meta.url);return new URL("workers/costsWorker.js",e)}catch(e){return new URL("./costsWorker.js",import.meta.url)}})();function Et(e){if(e instanceof Error)return e;if(e&&"object"==typeof e){if(e.error instanceof Error)return e.error;if("string"==typeof e.message)return new Error(e.message);if("string"==typeof e.type&&""!==e.type)return new Error(`Worker error: ${e.type}`)}return new Error(String(e??"Worker error"))}function kt(e,t,n){try{t(n)}finally{wt=null,Mt()}}function Tt(e,t){const n=t?Et(t):null;At&&(At.terminate(),At=null),St=!0;try{const t=bt(e.payload||{});n&&console.warn("costsWorker no disponible, usando cálculo local",n),kt(0,e.resolve,t)}catch(t){if(n){const r=new Error(`${n.message}; fallback error: ${t?.message||t}`);r.cause={worker:n,fallback:t},kt(0,e.reject,r)}else kt(0,e.reject,Et(t))}}function Mt(){if(wt||0===_t.length)return;const e=_t.shift();if(St)return void Tt(e);let t=null;try{t=function(){if(At)return At;if("undefined"==typeof Worker)throw new Error("Web Workers no soportados en este entorno");return At=new Worker(vt,{type:"module"}),At}()}catch(t){return void Tt(e,t)}const n=()=>{t&&(t.removeEventListener("message",r),t.removeEventListener("error",o))},r=t=>{n(),kt(0,e.resolve,t?.data??null)},o=t=>{n(),Tt(e,t)};t.addEventListener("message",r),t.addEventListener("error",o),wt={reject:e.reject};try{t.postMessage(e.payload)}catch(t){n(),Tt(e,t)}}function Nt({ingredientTree:e,globalQty:t}){return n={ingredientTree:e,globalQty:t},new Promise((e,t)=>{_t.push({payload:n,resolve:e,reject:t}),Mt()});var n}const It="item.html",Ot=[],Ct=new Map;let jt=null;function Lt(){return"undefined"!=typeof Date&&"function"==typeof Date.now?Date.now():0}function Rt(){jt||(jt=setTimeout(()=>{Ft({force:!0})},5e3))}function Ut(e,t){if(!e.length)return 0;const n=Math.ceil(e.length*t)-1;return e[Math.min(e.length-1,Math.max(0,n))]}function $t(){for(const e of Ct.values())if(e.samples.length>0)return!0;return!1}function Pt(){const e=function(){const e="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:null;return e?(Array.isArray(e.__GW2_TELEMETRY__)||(e.__GW2_TELEMETRY__=[]),e.__GW2_TELEMETRY__):null}();if(e)for(;Ot.length;)e.push(Ot.shift());else(Ot.length||$t())&&Rt()}function Dt(e={}){const t={view:e.view||It,bucket:e.bucket??null,type:e.type||"custom",timestamp:e.timestamp||(new Date).toISOString()};return null!=e.meta&&(t.meta=e.meta),null!=e.metrics&&(t.metrics=e.metrics),null!=e.tags&&(t.tags=e.tags),null!=e.error&&(t.error=e.error),function(e){Ot.push(e),Ot.length>=10?Ft():Rt()}(t),t}function xt({bucket:e=null,stale:t=null,duration:n}){if(!Number.isFinite(n)||n<0)return;const r=Number.isFinite(e)?Number(e):e,o=null==t?null:Boolean(t),a=`${r??"unknown"}|${null===o?"u":o?"1":"0"}`;let i=Ct.get(a);i||(i={bucket:r??null,stale:o,samples:[],lastUpdated:Lt()},Ct.set(a,i)),i.samples.push(n),i.lastUpdated=Lt(),i.samples.length>=10?Ft():Rt()}function Ft({force:e=!1}={}){jt&&(clearTimeout(jt),jt=null),function({force:e=!1}={}){const t=Lt(),n=[];for(const r of Ct.values()){if(!r.samples.length)continue;if(!(e||r.samples.length>=10||t-r.lastUpdated>=5e3))continue;const o=[...r.samples].sort((e,t)=>e-t),a={view:It,bucket:r.bucket,type:"aggregatePerformance",timestamp:(new Date).toISOString(),metrics:{count:o.length,p95:Ut(o,.95),p99:Ut(o,.99)},meta:{stale:r.stale}};n.push(a),r.samples=[],r.lastUpdated=t}n.length&&Ot.push(...n)}({force:e}),Pt(),e||!Ot.length&&!$t()||Rt()}function Bt(){return"undefined"!=typeof performance&&"function"==typeof performance.now?performance.now():Lt()}function Wt(e=[],t,n=6e4){if(!Array.isArray(e)||0===e.length)return()=>{};let r=!1;return async function o(){if(r)return;const a=$.getBackoff();a&&await new Promise(e=>setTimeout(e,a));try{const n=await ce(e);"function"==typeof t&&t(n)}catch(e){$.recordFailure()}r||setTimeout(o,n)}(),()=>{r=!0}}function Gt(e,t=0){if(null==e)return t;const n=Number(e);return Number.isFinite(n)?n:t}function Ht(e){return e?(t=e)&&"object"==typeof t&&!0===t.__hydrated&&"number"==typeof t._uid?(qe([e],null),e):qt(e,null):null;var t}function qt(e,t){const n=new He({id:e.id,name:e.name,icon:e.icon,rarity:e.rarity,count:Gt(e.count,1),buy_price:Gt(e.buy_price,0),sell_price:Gt(e.sell_price,0),is_craftable:Boolean(e.is_craftable),recipe:e.recipe||null,children:[],_parentId:t?t._uid:null});n.countTotal=Gt(e.countTotal,n.count),n.total_buy=Gt(e.total_buy,n.buy_price*n.countTotal),n.total_sell=Gt(e.total_sell,n.sell_price*n.countTotal),n.total_crafted=null==e.total_crafted?null:Gt(e.total_crafted,0),n.crafted_price=null==e.crafted_price?null:Gt(e.crafted_price,0),n.mode=e.mode||"buy",n.modeForParentCrafted=e.modeForParentCrafted||"buy",n.expanded=Boolean(e.expanded),n._parent=t||null;const r=Array.isArray(e.children)?e.children:[];return n.children=r.map(e=>qt(e,n)),n}const Jt=new Map,Qt=new WeakMap,zt=new Map,Kt="undefined"!=typeof IntersectionObserver?new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target;if(Qt.set(t,e.isIntersecting),e.isIntersecting){const e=t.dataset.stateId||t.dataset.path;if(!e)return;const n=Jt.get(e);if(!n)return;const r=n.find(e=>e.el===t),o=t._pendingState;r&&o&&(r.renderFn(o),t._pendingState=null)}})}):null;function Vt(e,t,n){const r=String(e);t.dataset.stateId=r;let o=Jt.get(r);o||(o=[],Jt.set(r,o)),o.push({el:t,renderFn:n}),Kt?Kt.observe(t):(Qt.set(t,!0),n&&zt.has(r)&&(n(zt.get(r)),t._pendingState=null))}function Yt(e,t){const n=String(e);zt.set(n,t);const r=Jt.get(n);r&&r.forEach(({el:e,renderFn:n})=>{Kt?Qt.get(e)?n&&n(t):e._pendingState=t:n&&(n(t),e._pendingState=null)})}var Xt=Object.freeze({__proto__:null,register:Vt,update:Yt});function Zt(){const e=document.querySelectorAll("img[data-src]");if("undefined"==typeof IntersectionObserver)return void e.forEach(e=>{e.dataset&&e.dataset.src&&(e.src=e.dataset.src)});const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src,t.unobserve(n)}})});e.forEach(e=>t.observe(e))}const en=new Set,tn=new Map;let nn=null,rn=null;function on(e){const t=Number(e);return Number.isNaN(t)?e:t}function an(e){if(!e)return{item:e,meta:null};if(e.data&&e.data.item){const t={...e.data.item},n=e.meta||{};["lang","source","fallback"].forEach(e=>{void 0!==n[e]&&void 0===t[e]&&(t[e]=n[e])});const r={};return void 0!==n.lang&&(r.lang=n.lang),void 0!==n.source&&(r.source=n.source),void 0!==n.fallback&&(r.fallback=n.fallback),{item:t,meta:Object.keys(r).length?r:null}}if(e.meta&&"object"==typeof e.meta){const t={};return void 0!==e.meta.lang&&(t.lang=e.meta.lang),void 0!==e.meta.source&&(t.source=e.meta.source),void 0!==e.meta.fallback&&(t.fallback=e.meta.fallback),{item:e,meta:Object.keys(t).length?t:null}}return{item:e,meta:null}}function sn(){nn||(nn=setTimeout(cn,50)),en.size>=200&&(clearTimeout(nn),cn())}async function ln(e,t,{baseUrl:n,signal:r,backoff:o,allowConditional:a}){if(!e.length)return{status:200,items:new Map,missing:[],metaById:new Map};const i=t?`&lang=${t}`:"",s=a?function(e,t){if(1!==e.length)return{};const n=ne(`item_${e[0]}`,!0);if(!n)return{};if(n.lang&&t&&n.lang!==t)return{};const r={};return n.etag&&(r["If-None-Match"]=n.etag),n.lastModified&&(r["If-Modified-Since"]=n.lastModified),r}(e,t):{},l=await P(`${n}${e.join(",")}${i}`,{headers:s,signal:r,backoff:o});if(304===l.status)return{status:304};if(!l.ok)throw new Error(`Unexpected response status: ${l.status}`);const c=await l.json();if(!Array.isArray(c))throw new Error("Unexpected response format");const u=l.headers.get("ETag"),f=l.headers.get("Last-Modified"),d=new Map,p=new Map;c.forEach(e=>{const{item:n,meta:r}=an(e);if(!n||void 0===n.id)return;const o=on(n.id);d.set(o,n);const a={etag:u,lastModified:f,lang:t};r&&(void 0!==r.lang&&(a.lang=r.lang),void 0!==r.source&&(a.source=r.source),void 0!==r.fallback&&(a.fallback=r.fallback)),p.set(o,a)});const g=e.filter(e=>!d.has(e));return{status:l.status,items:d,missing:g,metaById:p}}async function cn(){if(0===en.size)return void(nn=null);nn=null;const t=Array.from(en).slice(0,200);t.forEach(e=>en.delete(e));try{const n=$.getBackoff();n&&await new Promise(e=>setTimeout(e,n)),rn=new AbortController;const{API_BASE_URL:r,LANG:o,DEFAULT_LANG:a,FALLBACK_LANGS:i=[]}=e(),s=(o||a||"").trim()||"es",l=Array.isArray(i)?[...new Set(i.filter(e=>e&&e!==s))]:[],c=`${r}/items?ids=`,u=300+n;let f=null;try{if(f=await ln(t,s,{baseUrl:c,signal:rn.signal,backoff:u,allowConditional:!0}),304===f.status)return void t.forEach(e=>{const t=tn.get(e),n=ne(`item_${e}`);t&&t.resolve(n),tn.delete(e)})}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)throw e;f=null}const d=new Map,p=new Map;let g=[...t];f&&f.items&&(f.items.forEach((e,t)=>{const n=on(t);d.set(n,e);const r=f.metaById?.get(t);r&&p.set(n,r)}),g=f.missing);for(const e of l){if(!g.length)break;let t=null;try{if(t=await ln(g,e,{baseUrl:c,signal:rn.signal,backoff:u,allowConditional:!1}),304===t.status){const t=[];g.forEach(n=>{const r=ne(`item_${n}`,!0);r&&r.value?(d.set(n,r.value),p.set(n,{etag:r.etag??null,lastModified:r.lastModified??null,lang:r.lang??e})):t.push(n)}),g=t;continue}}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)throw e;continue}t&&t.items&&(t.items.forEach((n,r)=>{const o=on(r);d.set(o,n);const a=t.metaById?.get(r);a?p.set(o,a):p.set(o,{lang:e})}),g=t.missing)}if(g.length){const e=[];await Promise.all(g.map(async t=>{const n=on(t);try{const o=`${r}/items/${t}?lang=${s}`,a=await P(o,{signal:rn.signal,backoff:u});if(304===a.status){const t=ne(`item_${n}`,!0);return t&&t.value?(d.set(n,t.value),void p.set(n,{etag:t.etag??null,lastModified:t.lastModified??null,lang:t.lang??s,source:t.source??null,fallback:t.fallback??null})):void e.push(n)}if(404===a.status)return void e.push(n);if(!a.ok)return console.warn(`[requestManager] failed to fetch item ${t}: unexpected status ${a.status}`),void e.push(n);const i=async e=>{console.warn(`[requestManager] official API fallback for item ${t}: ${e}`);try{const e=`https://api.guildwars2.com/v2/items/${t}?lang=${s}`,n=await P(e,{signal:rn.signal,backoff:u});if(!n.ok)return console.warn(`[requestManager] official API fallback failed for item ${t}: unexpected status ${n.status}`),!1;const r=n.headers.get("content-type");if(!r||!String(r).toLowerCase().includes("application/json"))return console.warn(`[requestManager] official API fallback failed for item ${t}: unexpected content-type ${r||"unknown"}`),!1;let o;try{o=await n.json()}catch(e){if(e instanceof SyntaxError)return console.warn(`[requestManager] official API fallback failed for item ${t}: invalid JSON response`,e),!1;throw e}const{item:a,meta:i}=an(o);if(!a||void 0===a.id)return console.warn(`[requestManager] official API fallback failed for item ${t}: missing item id`),!1;const l=on(a.id),c={etag:n.headers.get("ETag"),lastModified:n.headers.get("Last-Modified"),lang:a.lang||i?.lang||s,source:i?.source||"official-api",fallback:i?.fallback||"official-api"};return a.source&&(c.source=a.source),a.fallback&&(c.fallback=a.fallback),d.set(l,a),p.set(l,c),te(`item_${l}`,a,void 0,c),!0}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)throw e;return console.warn(`[requestManager] official API fallback failed for item ${t}: ${e&&e.message?e.message:e}`),!1}},l=a.headers.get("content-type");if(!l||!String(l).toLowerCase().includes("application/json")){return void(await i(`unexpected content-type ${l||"unknown"}`)||e.push(n))}let c;try{c=await a.json()}catch(t){if(t instanceof SyntaxError){return void(await i("invalid JSON response")||e.push(n))}throw t}const{item:f,meta:g}=an(c);if(!f||void 0===f.id)return void e.push(n);const h=on(f.id),m={etag:a.headers.get("ETag"),lastModified:a.headers.get("Last-Modified"),lang:f.lang||s};g&&(void 0!==g.lang&&(m.lang=g.lang),void 0!==g.source&&(m.source=g.source),void 0!==g.fallback&&(m.fallback=g.fallback)),f.source&&(m.source=f.source),f.fallback&&(m.fallback=f.fallback),d.set(h,f),p.set(h,m),te(`item_${h}`,f,void 0,m)}catch(r){if(r instanceof DOMException&&"AbortError"===r.name)throw r;console.warn(`[requestManager] failed to fetch item ${t}: ${r&&r.message?r.message:r}`),e.push(n)}})),g=e}t.forEach(e=>{const t=on(e),n=tn.get(t)||tn.get(e);if(!n)return;const r=d.get(t);if(r){const e={...p.get(t)||{lang:s}};r&&r.lang&&(e.lang=r.lang),r&&r.source&&(e.source=r.source),r&&r.fallback&&(e.fallback=r.fallback),p.set(t,e),te(`item_${t}`,r,void 0,e),n.resolve(r)}else n.resolve(null);tn.delete(t),t!==e&&tn.delete(e)})}catch(e){t.forEach(t=>{const n=tn.get(t);n&&(e instanceof DOMException&&e.name,n.reject(e),tn.delete(t))})}en.size>0&&sn()}function un(e=[],t){rn&&(rn.abort(),rn=null),t&&t.addEventListener("abort",()=>rn&&rn.abort(),{once:!0});const n=e.map(e=>{const t=on(e),n=ne(`item_${t}`);if(n)return Promise.resolve(n);if(tn.has(t))return tn.get(t).promise;const r={};return r.promise=new Promise((e,t)=>{r.resolve=e,r.reject=t}),tn.set(t,r),en.add(t),sn(),r.promise});return Promise.all(n)}!function(){if("undefined"!=typeof localStorage)for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t.startsWith("item_")&&ne(t)}}();const fn="img/item-placeholder.svg";function dn(){return fn}"undefined"!=typeof module&&module.exports&&(module.exports.ITEM_ICON_PLACEHOLDER_PATH=fn,module.exports.getItemIconPlaceholderPath=dn,module.exports.default=fn);export{pt as $,Ht as A,xt as B,Wt as C,l as D,Pe as E,Vt as F,Yt as G,Zt as H,un as I,dn as J,bt as K,gt as L,s as M,mt as N,yt as O,Ge as P,He as Q,Ve as R,Ze as S,et as T,nt as U,rt as V,it as W,st as X,ut as Y,ft as Z,dt as _,ne as a,G as a0,de as a1,_e as a2,Xt as a3,te as b,P as c,W as d,q as e,ye as f,ue as g,fe as h,re as i,Oe as j,qe as k,tt as l,Je as m,g as n,Ye as o,ce as p,Qe as q,Nt as r,v as s,Dt as t,ze as u,Xe as v,E as w,Be as x,Bt as y,Fe as z};
