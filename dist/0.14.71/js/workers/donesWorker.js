const e={19676:1e4};let n=new Map,t=new Map,r=new Map;async function i(s,o=null){const c=function(e){const n=Number(e);return Number.isFinite(n)&&t.get(n)||null}(s.id),l=c?.name||s.name,u=c?.type||s.type,a=function(e,t,r){const i=Number(e);return!Number.isFinite(i)||(!!n.has(i)||((e=>{if("string"!=typeof e||!e)return!1;const n=e.toLowerCase();return((e="")=>{if(!e)return!1;const n=e.toLowerCase();return n.startsWith("don de ")||n.startsWith("don del ")||n.startsWith("don de la ")})(e)||n.includes("tributo")||n.includes("bendiciÃ³n")})(t)?(n.set(i,"gift"),!0):!!("string"==typeof r?r.toLowerCase():"").includes("account")&&(n.set(i,"account"),!0)))}(s.id,l,u)?null:function(n){const t=Number(n);if(!Number.isFinite(t))return null;if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];return{buy_price:n,sell_price:n}}return r.get(t)||null}(s.id),p=Array.isArray(s.components)?await Promise.all(s.components.map(e=>i(e,s.id))):[];return{id:s.id,name:l,icon:c?.icon||null,rarity:c?.rarity||null,type:u||null,count:s.count,buy_price:a?.buy_price??null,sell_price:a?.sell_price??null,is_craftable:p.length>0,children:p,_parentId:o}}const s="undefined"!=typeof self?self:globalThis;s.onmessage=async o=>{const{rootIngredients:c=[],skipEntries:l,preloadedItems:u,preloadedPrices:a}=o.data||{};Array.isArray(l)&&function(e=[]){const t=new Map;for(const n of e){if(!Array.isArray(n))continue;const[e,r]=n,i=Number(e);Number.isFinite(i)&&t.set(i,r||"market")}n=t}(l),u&&function(e={}){const n=new Map;e&&"object"==typeof e&&Object.entries(e).forEach(([e,t])=>{const r=Number(e);Number.isFinite(r)&&t&&"object"==typeof t&&n.set(r,{id:r,name:t.name||null,icon:t.icon||null,rarity:t.rarity||null,type:t.type||null})}),t=n}(u),a&&function(n={}){const t=new Map;n&&"object"==typeof n&&Object.entries(n).forEach(([e,n])=>{const r=Number(e);if(!Number.isFinite(r)||!n||"object"!=typeof n)return;const i=null!=n.buy_price?n.buy_price:null,s=null!=n.sell_price?n.sell_price:null;t.set(r,{buy_price:i,sell_price:s})}),Object.entries(e).forEach(([e,n])=>{const r=Number(e);Number.isFinite(r)&&t.set(r,{buy_price:n,sell_price:n})}),r=t}(a);const p=await Promise.all(c.map(e=>i(e,null)));s.postMessage({ingredientTree:p})};export{i as adaptNode};
